import Analysis, { status } from "../Models/Analysis";
import Contract from "../Services/Contract";

export function findFinishedAnalyses() {
    Analysis.findAll({ where: { status: status.SUBMITTED }})
        .then((analyses => {
            analyses.forEach((analysis) =>
                Contract.checkAnalysisResult(analysis)
                    .catch((e) => console.error(`Error on checking analysis ${analysis.id}... ${e.message}`))
            );
        }))
        .catch((e) => console.error(`Error on checking analyses result... , ${e.message}`));
}
