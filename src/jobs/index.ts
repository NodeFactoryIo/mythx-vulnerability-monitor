const schedule = require('node-schedule');
import { findExpiringUserTokens } from './RefreshToken';
import { findFinishedAnalyses } from './FetchAnalyses';

export default function start() {
    // Check every 1 minute if any user with expired tokens
    schedule.scheduleJob('*/1 * * * *', function () {
        console.log("Going to find expiring user tokens...");
        findExpiringUserTokens();
    });

    // Check every 5 minutes if any analysis have been finished
    schedule.scheduleJob('*/1 * * * *', function () {
        console.log("Going to find finished analyses...");
        findFinishedAnalyses();
    });
};
